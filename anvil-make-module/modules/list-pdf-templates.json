{
  "name": "listPdfTemplates",
  "label": "List PDF Templates",
  "description": "Retrieve a list of all PDF templates (Casts) available in your Anvil organization",
  "type": "search",
  "connection": "anvil",
  "communication": {
    "url": "https://graphql.useanvil.com",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Basic {{base64(connection.apiKey + ':')}}"
    },
    "body": {
      "query": "query { currentUser { organizations { eid name slug casts { eid name createdAt updatedAt isArchived versionNumber } } } }"
    },
    "response": {
      "iterate": "{{body.data.currentUser.organizations[0].casts}}",
      "output": {
        "eid": "{{item.eid}}",
        "name": "{{item.name}}",
        "createdAt": "{{item.createdAt}}",
        "updatedAt": "{{item.updatedAt}}",
        "isArchived": "{{item.isArchived}}",
        "versionNumber": "{{item.versionNumber}}"
      },
      "error": {
        "message": "{{if(body.errors; body.errors[0].message; 'Failed to list PDF templates')}}"
      }
    },
    "log": {
      "sanitize": [
        "request.headers.Authorization"
      ]
    }
  },
  "parameters": [],
  "interface": [
    {
      "name": "eid",
      "label": "Template ID",
      "type": "text"
    },
    {
      "name": "name",
      "label": "Template Name",
      "type": "text"
    },
    {
      "name": "createdAt",
      "label": "Created At",
      "type": "date"
    },
    {
      "name": "updatedAt",
      "label": "Updated At",
      "type": "date"
    },
    {
      "name": "isArchived",
      "label": "Is Archived",
      "type": "boolean"
    },
    {
      "name": "versionNumber",
      "label": "Version Number",
      "type": "integer"
    }
  ]
}
